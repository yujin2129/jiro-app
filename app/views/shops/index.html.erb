<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="mb-0 font-jiro text-dark border-bottom border-3 border-warning pb-1">
    <% if params[:keyword].present? %>
      「<%= params[:keyword] %>」の検索結果
    <% else %>
      店舗一覧
    <% end %>
  </h2>

  <% if user_signed_in? && current_user.admin? %>
    <%= link_to "＋ 新規店舗登録", new_shop_path, class: "btn btn-warning fw-bold" %>
  <% end %>
</div>

<div class="d-flex justify-content-between align-items-center mb-3">
  <div>
    <%= form_with url: shops_path, method: :get, local: true, class: "d-flex align-items-center" do %>
      <%= hidden_field_tag :keyword, params[:keyword] %>

      <%= label_tag :sort, "並び替え:", class: "me-2 fw-bold text-dark" %>
      <%= select_tag :sort,
            options_for_select(
              [["新着順", "newest"], 
               ["評価順", "rating"], 
               ["お気に入り順", "favorites"]],
              params[:sort]
            ),
            class: "form-select form-select-sm w-auto",
            onchange: "this.form.submit();" %>
    <% end %>
  </div>

  <% if params[:keyword].present? %>
    <span class="text-muted small">
      <%= pluralize(@shops.size, "件") %>ヒットしました
    </span>
  <% end %>
</div>

<% if @shops.any? %>
  <div class="row g-3">
    <%= render partial: "shop_card", collection: @shops, as: :shop %>
  </div>
<% else %>
  <div class="alert alert-warning mt-3">
    <i class="bi bi-exclamation-triangle-fill me-1"></i>
    該当する店舗が見つかりませんでした。
  </div>
<% end %>
